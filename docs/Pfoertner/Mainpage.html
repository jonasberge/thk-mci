<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Porter Mainpage</title>
  <script defer src="https://use.fontawesome.com/releases/v5.9.0/js/all.js"></script>
    <link rel="stylesheet" href="../vendor/bulma-0.9.0/bulma.min.css">
    <link rel="stylesheet" href="../styles.css">
  </head>
  <body>

<!--hero---------------------------------------------------------------------------------->
  <section class="hero mx-0">
    <div class="hero-image">
      <div class="hero-text">
        <h1 class="title is-1 has-text-white mx-4 my-2">
          TH-Köln
        </h1>
        <h2 class="subtitle is-2 has-text-white mx-4 my-2">
          Campus Gummersbach
        </h2>
        <!-- Main container -->
        <nav class="level">
          <!-- Left side -->
          <div class="level-left">
          </div>
          <!-- Right side -->
          <div class="level-right mr-4 mb-2">
            <div class="level-item">
              <div class="field has-addons">
                <p class="control">
                  <input class="input" type="text" placeholder="Suche">
                </p>
                <p class="control">
                  <button class="button">
                    Suchen
                  </button>
                </p>
              </div>
          </div>
        </nav>
      </div>
    </div>
  </section>


<!--nav----------------------------------------------------------------------------------->
  <!--nav class="navbar is-primary">
    <div class="container">
      <div class="navbar-brand">
        <a class="navbar-item" href="#" style="font-weight: bold;">
          Trans.ponder
        </a>
        <span class="navbar-burger burger" data-target="navMenu">
          <span></span>
          <span></span>
          <span></span>
        </span>
      </div>
      <div id="navMenu" class="navbar-menu">
        <div class="navbar-end">
          <a href="#" class="navbar-item is-activ">Home</a>
          <a href="#" class="navbar-item">Verleih</a>
          <a href="#" class="navbar-item">Rückgabe</a>
          <a href="#" class="navbar-item">Verliehene</a>
          <a href="#" class="navbar-item">Suche</a>
        </div>
      </div>
    </div>
  </nav>
  <script type="text/javascript">
    (function(){
      var burger = document.querySelector('.burger');
      var nav = document.querySelector('#'+burger.dataset.target);

      burger.addEventListener('click', function(){
        burger.classList.toggle('is-active');
        nav.classList.toggle('is-active');
      });
    })();
  </script-->

<!--sidemenu------------------------------------------------------------------------------>
<div class="columns is-fullheight">
  <div class="column is-2 is-sidebar-menu is-hidden-mobile is-fullheight">
    <aside class="menu">
      <hr class="navbar-divider">
      <p class="menu-label">
        Dashboard
      </p>
      <hr class="navbar-divider">
      <ul class="menu-list">
        <li><a class="is-active">Dashboard</a></li>
        <li id="btn_trans_verleih"><a>Verleih</a></li>
        <li id="btn_trans_rückgabe"><a>Rückgabe</a></li>
        <li><a id="btn_trans_verliehen">Verliehene Transponder
        </a></li>
      </ul>
      <div>
        <hr class="navbar-divider">
        <p class="menu-label">
          Sonstige
        </p>
        <hr class="navbar-divider">
        <ul class="menu-list">
          <li><a class="has-text-grey">Einstellung</a></li>
          <li><a href="./Login.html">Logout</a></li>
        </ul>
      </div>

    </aside>
  </div>

<!--Modal-scheme------------------------------------------
  <section>
    <div>
      <button class="button is-link is-large" id="button-modal">Link</button>

      <div class="modal" id="page-modal">
        <div class="modal-background"></div>
        <div class="modal-content">
          Hier ist ein PopUp
        </div>
        <button class="modal-close is-large" aria-label="close" id="button-close"></button>
      </div>
    </div>
    <script type="text/javascript">
      var button_modal = document.getElementById('button-modal')
      var modal = document.getElementById('page-modal')
      var button_close = document.getElementById('button-close')

      button_modal.onclick = function(){
        modal.style.display = 'block';
      }
      button_close.onclick = function(){
        modal.style.display = 'none'
      }
    </script>
  </section>
-->


    <!--Transponder zurückgeben------------------>
  <section>
    <div>
      <div class="modal pt-6" id="mdl_trans_rückgabe">
        <div class="modal-background"></div>
        <div class="modal-content mt-6">
          <article class="message is-large is-link">
            <div class="message-header">
              <p>Transponder zurückgeben</p>
            </div>
            <div class="message-body">
              <section class="container">
                <div class="level ">
                  <p class="level-item"><input id="input-transponder-number" class="input is-clipped" type="text" placeholder="Transpondernummer eingeben..."></p>
                </div>
                <br>
                <div class="level" id="container-lending-info">
                  <div class="level-item">
                    <p>
                      <span class="info-title-room">Raum</span>:<br>
                      Ausleiher:<br>
                      Ausleihdatum:<br>
                      Uhrzeit:<br>
                      Fristgerecht:
                    </p>
                  </div>
                  <div class="level-item" style="text-align: left;">
                    <p>
                      <span class="info-room"></span><br> <!-- 0.401 -->
                      <span class="info-lender"></span><br> <!-- Alex Brimm -->
                      <span class="info-lending-time"></span><br> <!-- TT.MM.YYYY -->
                      <span class="info-current-time"></span><br> <!-- HH:MM Uhr -->
                      <span class="info-on-time"></span> <!-- Ja -->
                    </p>
                  </div>
                </div>
                <br>
                <div class="level">
                  <button id="btn_close_trans_abbrechen" class="button is-link is-outlined ">Abbrechen</button>
                  &nbsp;&nbsp;&nbsp;&nbsp;
                  <button id="btn_close_trans_rückgabe" class="button is-link level-item">Rückgabe Bestätigen</button>
                </div>
              </section>
            </div>
          </article>
        </div>
      </div>
    </div>

    <div>
      <div class="modal pt-6" id="mdl_trans_rückgabe_bestätigt">
        <div class="modal-background"></div>
        <div class="modal-content mt-6">
          <article class="message is-large is-link">
            <div class="message-header">
              <p>Bestätigt</p>
            </div>
            <div class="message-body">
              <section class="container">
                Der Transponder wurde erfolgreich zurückgegeben.
                <br><br>
                <div class="level" id="btn_close_trans_rückgabe">
                  <button class="button is-link level-item" id="btn_bestätigung_close">OK</button>
                </div>
              </section>
            </div>
          </article>
        </div>
      </div>
    </div>

    <script type="text/javascript">
      //Modal itself
      var button_modal_transponder_rückgabe = document.getElementById('btn_trans_rückgabe')
      var modal_transponder_rückgabe = document.getElementById('mdl_trans_rückgabe')
      var button_close_transponder_rückgabe = document.getElementById('btn_close_trans_rückgabe')
      var button_transponder_check = document.getElementById('btn_trans_rückgabe_prüfen')
      var modal_bestätigung = document.getElementById('mdl_trans_rückgabe_bestätigt')
      var button_bestätigung_close = document.getElementById('btn_bestätigung_close')

      button_modal_transponder_rückgabe.onclick = function(){
        modal_transponder_rückgabe.style.display = 'block';
      }
      button_close_transponder_rückgabe.onclick = function(){
        modal_transponder_rückgabe.style.display = 'none';
        modal_bestätigung.style.display = 'block';
      }

      button_bestätigung_close.onclick = function(){
        modal_bestätigung.style.display = 'none';
      }
    </script>
  </section>

  <!--Transponder verleihen-------------------->
  <section>
    <div>
      <div class="modal pt-6" id="mdl_trans_verleih">
        <div class="modal-background"></div>
        <div class="modal-content mt-6">
          <article class="message is-large is-link">
            <div class="message-header">
              <p>Transponder verleihen</p>
            </div>
            <div class="message-body">
              <section class="container">
                <div class="section py-0">
                  Wählen sie einen Transponder.<br>
                  Sie können diese auch nach Räumen filtern.<br><br>
                  Raum: <input id="input-room-number" class="input"
                    placeholder="Nach Raum filtern, zum Beispiel 0.401"><br>
                </div>
                <section class="section pb-0 pt-4">
                  <div class="columns">
                    <div class="column is-three-fifth">
                      <div class="control">
                        <div class="select">
                          <select class="grey" id="select-transponder-number">
                            <option id="select-option-meta" value="0" disabled="true" selected="true">Transponder wählen...</option>
                          </select>
                        </div>
                      </div>
                    </div>

                    <div class="column is-two-fifth">
                      <div class="level">
                        <button id="button-check-multica" class="button is-link level-item">MultiCa scannen</button>
                      </div>
                    </div>
                  </div>

                  <section class="section py-0 px-0">
                    <div class="level">
                      <button id="signature-button" class="button is-link level-item">
                        <span id="signature-icon" class="icon is-small has-text-success" style="display:none; padding-right: 6px">
                          <i class="fas fa-check"></i>
                        </span>
                        <span id="signature-message">Unterschrift einlesen</span>
                      </button>
                    </div>
                    <div id="info-scanner-container" class="level" style="display: none">
                      <p style="text-align: center; word-wrap: none">
                        <span id="scanner-icon" class="icon is-small" style="display: none; padding-right: 6px">
                          <i class="fas fa-check"></i>
                        </span>
                        <span id="info-scanner-message"></span>
                      </p>
                    </div>
                    <div class="level">
                      <div class="left-level"></div>
                      <div class="right-level">
                        <section class="section level-item pb-0 pr-0" style="padding-top: 0">
                          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                          <button id="btn_close_trans_verleih" class="button is-link is-outlined is-medium">Abbrechen</button>
                          &nbsp;
                          <button id="btn_confirm_trans_verleih" class="button is-link is-medium">Bestätigen</button>
                        </section>
                      </div>
                    </div>
                  </section>
                </section>
              </section>
            </div>
          </article>
        </div>
      </div>
    </div>

    <div>
      <div class="modal pt-6" id="mdl_trans_verleih_bestätigt">
        <div class="modal-background"></div>
        <div class="modal-content mt-6">
          <article class="message is-large is-link">
            <div class="message-header">
              <p>Bestätigt</p>
            </div>
            <div class="message-body">
              <section class="container">
                Der Transponder wurde erfolgreich verliehen.
                <br><br>
                <div class="level">
                  <button class="button is-link level-item" id="btn_bestätigung_verleih_close">OK</button>
                </div>
              </section>
            </div>
          </article>
        </div>
      </div>
    </div>

    <script type="text/javascript">
      //Modal itself
      var button_modal_transponder_verleih = document.getElementById('btn_trans_verleih')
      var modal_transponder_verleih = document.getElementById('mdl_trans_verleih')
      var button_close_transponder_verleih = document.getElementById('btn_close_trans_verleih')
      var modal_bestätigung_verleih = document.getElementById('mdl_trans_verleih_bestätigt')
      var button_bestätigung_verleih_close = document.getElementById('btn_bestätigung_verleih_close')

      button_modal_transponder_verleih.onclick = function(){
        modal_transponder_verleih.style.display = 'block';
      }
      button_close_transponder_verleih.onclick = function(){
        modal_transponder_verleih.style.display = 'none';
        modal_bestätigung_verleih.style.display = 'block';
      }
      button_bestätigung_verleih_close.onclick = function(){
        modal_bestätigung_verleih.style.display = 'none';
      }
    </script>
  </section>


  <!--table------------------------------------------------------------------------------>
  <div class="column" >
    <div class="table-container">
      <table class="table is-hoverable is-fullwidth">
        <thead class="is-primary">
          <tr>
            <td style="text-align: center">Status</td><td>Raum</td><td>Dozent</td><td>Transponder</td><td>Dauer</td>
          </tr>
        </thead>
        <tbody id="table-transponder">
        </tbody>
      </table>
    </div>
  </div>
</div>

<script src="../vendor/sql-js/sql-wasm.js"></script>
<script src="../assets/scripts/util.js"></script>
<script src="../assets/scripts/db.js"></script>

<script>
  const g_noop = function () {};
  var g_close_modal = g_noop;
</script>

<script src="../assets/scripts/common.js"></script>

<script src="../assets/scripts/porter/init.js"> // load all transponders into the table </script>
<script src="../assets/scripts/porter/modal/return.js"> // handle events related to the modal "Transponder zurückgeben". </script>
<script src="../assets/scripts/porter/modal/lend.js"> // handle events related to the modal "Transponder verleihen" </script>

<script>

  const btn_trans_verliehen = document.querySelector('#btn_trans_verliehen');



</script>
